---
description: 
globs: 
alwaysApply: false
---
# 3ï¸âƒ£ ScaffoldGenerator ãƒ«ãƒ¼ãƒ«

## ä½¿ç”¨æ–¹æ³•
**å®Ÿè¡Œã‚¿ã‚¤ãƒ—**: æ‰‹å‹•å®Ÿè¡Œ  
ã‚³ãƒãƒ³ãƒ‰: `@scaffold game {id} {title}`  
**ç›®çš„**: VetGameSprint 10ã‚²ãƒ¼ãƒ é«˜é€Ÿã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ«ãƒ‰ - 1é€±é–“ã§10æœ¬å®Œæˆã‚’æ”¯æ´

## å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- **id**: 2æ¡ã‚²ãƒ¼ãƒ ç•ªå· (ä¾‹: 01, 02, 03... 10)
- **title**: ã‚¹ãƒ©ãƒƒã‚°å (ä¾‹: puppy-click, vaccine-puzzle)

## ğŸ® 10ã‚²ãƒ¼ãƒ å¯¾å¿œãƒãƒƒãƒ”ãƒ³ã‚°

| ID | ã‚¿ã‚¤ãƒˆãƒ« | ã‚¹ãƒ©ãƒƒã‚° | ã‚¸ãƒ£ãƒ³ãƒ« |
|----|----------|----------|----------|
| 01 | ãƒ‘ãƒ”ãƒ¼ã‚¯ãƒªãƒƒã‚¯ | puppy-click | Cookie Clicker |
| 02 | ãƒ¯ã‚¯ãƒãƒ³ãƒ‘ã‚ºãƒ« | vaccine-puzzle | Match-3 |
| 03 | æ‰‹è¡“ãƒªã‚ºãƒ ã‚¿ãƒƒãƒ— | surgery-rhythm | ãƒªã‚ºãƒ ã‚²ãƒ¼ãƒ  |
| 04 | ã‚­ãƒ£ãƒƒãƒˆãƒ©ãƒ³ãƒŠãƒ¼ | cat-runner | Endless Runner |
| 05 | ãƒ¬ãƒ³ãƒˆã‚²ãƒ³ã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | xray-sorting | Sorting/Reflex |
| 06 | æŠ—èŒã‚«ãƒ¼ãƒ‰ãƒãƒˆãƒ« | antibiotics-card | TCG |
| 07 | ã‚¨ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚·ãƒ¼ãƒˆãƒªã‚¢ãƒ¼ã‚¸ | emergency-triage | Time-based |
| 08 | ãƒ•ãƒ¼ãƒ‰ãƒã‚§ãƒ¼ãƒ³ã‚¹ãƒãƒƒã‚·ãƒ¥ | foodchain-smash | Physics Breakout |
| 09 | ãƒŸã‚¯ãƒ­ãƒ‘ã‚ºãƒ«ãƒ©ãƒœ | micro-puzzle | Pipe Puzzle |
| 10 | ãƒ‰ãƒƒã‚°ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼QTE | dog-trainer-qte | QTE Reaction |

## ğŸš€ ç”Ÿæˆæ‰‹é †

### 1. monorepoæ§‹é€ å¯¾å¿œãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
```bash
# ç”Ÿæˆã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
games/p{id}-{title}/
â”œâ”€â”€ index.tsx              # React ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ GameScene.ts           # Phaser 3 ãƒ¡ã‚¤ãƒ³ã‚·ãƒ¼ãƒ³
â”œâ”€â”€ types.ts              # ã‚²ãƒ¼ãƒ å›ºæœ‰å‹å®šç¾©
â”œâ”€â”€ components/           # ã‚²ãƒ¼ãƒ å°‚ç”¨UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ GameUI.tsx
â”‚   â”œâ”€â”€ ScoreDisplay.tsx
â”‚   â””â”€â”€ GameOverModal.tsx
â”œâ”€â”€ assets/              # ã‚²ãƒ¼ãƒ ç”¨ã‚¢ã‚»ãƒƒãƒˆ
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ sounds/
â”‚   â””â”€â”€ config.json
â”œâ”€â”€ hooks/               # ã‚²ãƒ¼ãƒ å›ºæœ‰hooks
â”‚   â””â”€â”€ useGameLogic.ts
â”œâ”€â”€ README.md            # ã‚²ãƒ¼ãƒ ä»•æ§˜æ›¸
â””â”€â”€ package.json         # ä¾å­˜é–¢ä¿‚ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
```

### 2. Phaser 3 + React ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé©ç”¨

#### index.tsx ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```typescript
// games/p{id}-{title}/index.tsx
import React, { useEffect, useRef } from 'react';
import Phaser from 'phaser';
import { GameScene } from './GameScene';
import { useGameStore } from '@/packages/game-core';
import { GameUI } from './components/GameUI';

export const {TitleCase}Game: React.FC = () => {
  const gameRef = useRef<Phaser.Game | null>(null);
  const { initGame } = useGameStore();

  useEffect(() => {
    const config: Phaser.Types.Core.GameConfig = {
      type: Phaser.AUTO,
      width: 800,
      height: 600,
      parent: 'phaser-game-{id}',
      scene: GameScene,
      physics: {
        default: 'arcade',
        arcade: { gravity: { y: 300 }, debug: false }
      }
    };
    
    gameRef.current = new Phaser.Game(config);
    initGame('p{id}-{title}');
    
    return () => gameRef.current?.destroy(true);
  }, []);

  return (
    <div className="w-full max-w-4xl mx-auto p-4">
      <GameUI gameId="p{id}-{title}" />
      <div id="phaser-game-{id}" className="mx-auto rounded-lg overflow-hidden shadow-lg" />
    </div>
  );
};
```

#### GameScene.ts ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```typescript
// games/p{id}-{title}/GameScene.ts
import Phaser from 'phaser';
import { analytics } from '@/packages/utils';

export class GameScene extends Phaser.Scene {
  private startTime!: number;
  private gameId = 'p{id}-{title}';
  private retryCount = 0;

  constructor() {
    super({ key: 'GameScene' });
  }

  init() {
    this.startTime = Date.now();
    analytics.track('play', {
      gameId: this.gameId,
      timestamp: this.startTime
    });
  }

  preload() {
    // ã‚²ãƒ¼ãƒ å›ºæœ‰ã‚¢ã‚»ãƒƒãƒˆèª­ã¿è¾¼ã¿
    this.load.image('placeholder', '/assets/games/p{id}/placeholder.png');
  }

  create() {
    // 90ç§’åˆ¶é™ã‚¿ã‚¤ãƒãƒ¼
    this.time.addEvent({
      delay: 90000,
      callback: this.endGame,
      callbackScope: this
    });

    this.setupGameplay();
  }

  update() {
    // ãƒ•ãƒ¬ãƒ¼ãƒ æ›´æ–°å‡¦ç†
  }

  private setupGameplay() {
    // {ã‚¸ãƒ£ãƒ³ãƒ«}ã‚²ãƒ¼ãƒ å›ºæœ‰ã®ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
    // TODO: å®Ÿè£…ã—ã¦ãã ã•ã„
  }

  private endGame() {
    const playTime = Date.now() - this.startTime;
    analytics.track('game_end', {
      gameId: this.gameId,
      playTime,
      retryCount: this.retryCount
    });

    // React UIã«é€šçŸ¥
    window.dispatchEvent(new CustomEvent('gameEnd', {
      detail: { gameId: this.gameId, playTime }
    }));
  }
}
```

### 3. GitHub Actions CI/CD è¨­å®šè¿½åŠ 

#### .github/workflows/preview-p{id}.yml
```yaml
name: Preview p{id}-{title}

on:
  push:
    paths:
      - 'games/p{id}-{title}/**'
  pull_request:
    paths:
      - 'games/p{id}-{title}/**'

jobs:
  preview:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - run: npm ci
      - run: npm run build
      - run: npm run test -- games/p{id}-{title}
      
      - name: Deploy to Vercel Preview
        uses: vercel/action@v1
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-args: '--prod --scope games/p{id}-{title}'
```

### 4. å¿…é ˆãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ç”Ÿæˆ

#### README.md
```markdown
# p{id}-{title} - {ã‚²ãƒ¼ãƒ å}

## æ¦‚è¦
- **ã‚¸ãƒ£ãƒ³ãƒ«**: {ã‚¸ãƒ£ãƒ³ãƒ«}
- **ãƒ—ãƒ¬ã‚¤æ™‚é–“**: 90ç§’ä»¥å†…
- **ç›®æ¨™ãƒªãƒˆãƒ©ã‚¤ç‡**: 60%ä»¥ä¸Š

## ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«
TODO: ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¼‰

## é–‹ç™ºçŠ¶æ³
- [ ] åŸºæœ¬ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—å®Ÿè£…
- [ ] UI/UXå®Ÿè£…  
- [ ] LPé·ç§»ãƒœã‚¿ãƒ³è¨­ç½®
- [ ] AnalyticsåŸ‹ã‚è¾¼ã¿
- [ ] 90ç§’åˆ¶é™å®Ÿè£…
- [ ] ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½å®Ÿè£…

## ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼URL
- é–‹ç™º: http://localhost:3000/games/p{id}
- ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°: https://vetgame-p{id}-{title}.vercel.app
```

## ğŸ¯ ä½¿ç”¨ä¾‹

### åŸºæœ¬å®Ÿè¡Œ
```bash
# ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã§å®Ÿè¡Œ
@scaffold game 01 puppy-click

# çµæœ:
# âœ… games/p01-puppy-click/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
# âœ… Phaser 3 + React ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé©ç”¨
# âœ… CI/CD ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¿½åŠ 
# âœ… Vercel Previewè¨­å®šå®Œäº†
```

### å…¨10ã‚²ãƒ¼ãƒ ä¸€æ‹¬ç”Ÿæˆ
```bash
@scaffold game 01 puppy-click
@scaffold game 02 vaccine-puzzle
@scaffold game 03 surgery-rhythm
@scaffold game 04 cat-runner
@scaffold game 05 xray-sorting
@scaffold game 06 antibiotics-card
@scaffold game 07 emergency-triage
@scaffold game 08 foodchain-smash
@scaffold game 09 micro-puzzle
@scaffold game 10 dog-trainer-qte
```

## ğŸ“¦ ä¾å­˜é–¢ä¿‚ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸çµ±åˆ

### å…±é€šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è‡ªå‹•ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¨­å®š
```typescript
// å„ã‚²ãƒ¼ãƒ ã§è‡ªå‹•çš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹
import { useGameStore } from '@/packages/game-core';
import { 
  GameOverOverlay,
  RetryButton, 
  LPTransitionButton,
  TimerWidget 
} from '@/packages/ui';
import { analytics } from '@/packages/utils';
```

### KPIè¿½è·¡è‡ªå‹•è¨­å®š
- Plausible AnalyticsåŸ‹ã‚è¾¼ã¿
- å¿…é ˆã‚¤ãƒ™ãƒ³ãƒˆï¼ˆplay, retry, click_lpï¼‰è¿½åŠ 
- 90ç§’åˆ¶é™ã‚¿ã‚¤ãƒãƒ¼è‡ªå‹•å®Ÿè£…

---

**ç”Ÿæˆå¾Œã®æ¬¡ã‚¹ãƒ†ãƒƒãƒ—**: 
1. åŸºæœ¬ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—å®Ÿè£…
2. UI/UXèª¿æ•´
3. LPé·ç§»ãƒœã‚¿ãƒ³è¨­ç½®ç¢ºèª
4. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼URLå‹•ä½œç¢ºèª



